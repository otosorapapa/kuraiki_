# フェーズ1: 基礎改善フェーズ（初期診断とクイックウィン）

## 1. 現状診断（仮定）

- **ユーザー視点の不足**: 開発者には理解しやすいが初見ユーザーには使い方が伝わりにくい。導入文やヘルプがないため、ユーザーがアプリの価値や操作手順を把握しづらい。
- **入力インターフェースの散漫さ**: スライダーやセレクトボックスが画面全体に散在し、数万件の選択肢を持つウィジェットがパフォーマンスやユーザーの認知負荷を悪化させている。
- **レイアウト・デザインの統一感不足**: デフォルトテーマのままで、マッキンゼー風の高級感や企業らしいブランディングが伝わらない。配色・余白・フォントサイズが最適化されていない。
- **操作負荷の高さ**: 入力変更のたびに全体が再実行され、待ち時間が長く感じる。重い処理がユーザー体験を損ねている可能性がある。

## 2. 課題抽出

| 項目 | 課題 | コンサル視点での示唆 |
| --- | --- | --- |
| 実用性 | 意思決定を支援する分析が不足し、示唆が弱い。 | バリューチェーン全体（インバウンド〜アウトバウンド）の把握が不可欠。 |
| ユーザーフレンドリー性 | 入力導線・例示が乏しく、認知負荷が高い。 | オンボーディング→入力→結果確認の各段階をガイドする必要。 |
| デザイン性 | 統一感がなく高級感を訴求できていない。 | 視覚デザインの最適化が信頼性を高める。 |
| 操作負荷 | 過剰な選択肢と重い処理で疲弊させる。 | 操作の最小化がCX向上の鍵。 |
| 実装可能性 | 改善コストやリソースを考慮する必要。 | 短期と中期で計画的に実行する。 |

## 3. 改善提案

### 3-1. ユーザー中心設計の導入

- アプリ冒頭に目的・ゴールを2〜3文で説明し、オンボーディング動画やチュートリアルを埋め込む。
- 主要な入力項目にデフォルト値やサンプルを設定し、初回利用でもすぐに結果が得られる状態にする。
- ヘルプ情報はツールチップ (`help` 属性) やエクスパンダーで提供し、必要時のみ詳細を開示する。

### 3-2. レイアウト・UIの再設計

- `st.sidebar` を活用して入力系をサイドバーに集約し、メイン領域は結果表示・分析に専念させる。
- `st.set_page_config(layout="wide")` と `st.columns` を組み合わせ、横幅を広げて情報を整理し、視線誘導を最適化する。
- ページタイトル・アイコン・ロゴを設定し、マッキンゼー風のブルー/グレーを基調に余白を活かしたミニマルなデザインを採用する。

### 3-3. パフォーマンスと操作負荷の削減

- セレクトボックスの膨大な候補を廃し、`st.number_input` やテキスト入力でステップ幅を制御する。
- `@st.cache_data` を利用して重い読み込みや計算をキャッシュし、再計算を最小化する。
- `st.spinner` や `st.progress` で処理状況を可視化し、待機中の不安を軽減する。

## 4. 実装例（Streamlitコード断片）

```python
import streamlit as st
import pandas as pd

st.set_page_config(
    page_title="意思決定支援ダッシュボード",
    page_icon="📊",
    layout="wide",
)

st.sidebar.image("https://example.com/company_logo.png", width=120)

st.title("意思決定支援ダッシュボード")
st.write(
    """
    このアプリは中小企業診断士向けに経営データを可視化し、意思決定を支援するためのものです。
    以下の入力を設定すると、主要KPIの変動やシナリオ分析結果が表示されます。
    """
)

with st.sidebar:
    st.header("入力設定")
    target_year = st.number_input(
        "対象年度",
        min_value=2019,
        max_value=2025,
        value=2024,
        step=1,
        help="分析対象とする会計年度を入力してください",
    )
    company_name = st.text_input(
        "企業名",
        value="株式会社サンプル",
        help="分析対象となる企業名を入力してください",
    )
    uploaded_file = st.file_uploader(
        "財務データ (CSV)",
        type=["csv"],
        help="財務データのCSVファイルをアップロードします",
    )

@st.cache_data(ttl=24 * 60 * 60)
def load_data(file):
    return pd.read_csv(file)

if uploaded_file:
    data = load_data(uploaded_file)
    st.success("データの読み込みが完了しました")

    col1, col2 = st.columns([1, 2])
    with col1:
        st.subheader("主要指標")
        # st.metric などでKPIを表示
    with col2:
        st.subheader("売上推移グラフ")
        # st.line_chart(data) などでグラフを描画
else:
    st.info("サイドバーからデータをアップロードしてください")
```

上記コードは、ページ設定とロゴ表示、導入文の追加、サイドバーへの入力集約、キャッシュ利用、列レイアウトによる視線誘導といったクイックウィンを網羅している。Phase 1 の改善内容を実装する際のたたき台として活用できる。
